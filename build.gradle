/*
* This file was generated by the Gradle 'init' task.
*
* This is a general purpose Gradle build.
* Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.6.2/samples
*/
plugins {
	id 'java-library'
	id 'distribution'
}

repositories {
	maven {
		url "file://$rootDir/repository"
	}
	mavenCentral()
	maven {
		url "https://www.hec.usace.army.mil/nexus/repository/maven-public"
	}
}

dependencies {
	// https://mvnrepository.com/artifact/com.github.librepdf/openpdf
	// OpenPDF is an open-source version of itext 4.x, compatible with 5.x in CWMS.
	implementation 'com.github.librepdf:openpdf:1.3.43'
	// https://mvnrepository.com/artifact/com.itextpdf/itext7-core
	// implementation 'com.itextpdf:itextpdf:5.5.13.3'
	implementation 'com.itextpdf:itext-core:9.0.0'
	// https://mvnrepository.com/artifact/log4j/log4j
	implementation 'log4j:log4j:1.2.17'

	// HEC libaries
	implementation 'mil.army.usace.hec:hec-lib:7.0-SNAPSHOT'
	implementation 'mil.army.usace.hec:hec-server-suite:6.0.0' // CWMS 3.3.1 -> 4.0.5
	implementation 'mil.army.usace.hec:hec-monolith:4.0.2' // CWMS 3.3.1 -> 3.3.19
	implementation 'mil.army.usace.hec:hec-cwms-ratings-core:3.0.1' // CWMS 3.3.1 -> 1.1.0
	implementation 'mil.army.usace.hec:hec-db-radar:10.0.2' // CWMS 3.3.1 -> 9.4.17
	implementation 'mil.army.usace.hec:cwms-db-dao:10.0.2' // CWMS 3.3.1 -> 9.4.17
	implementation 'mil.army.usace.hec:jython-db-api:10.0.2' // CWMS 3.3.1 -> 9.4.17
	// This version is for a custom build of jython-db-api with jpype fixes
	//implementation 'mil.army.usace.hec:jython-db-api:99.enhancements-cpython-jpype-support-SNAPSHOT' // CWMS 3.3.1 -> 9.4.17
	
	// These should go away once on CWBI
	//implementation 'mil.army.usace.hec:hec-db-jdbc:10.0.2' // CWMS 3.3.1 -> 9.4.17
	implementation 'mil.army.usace.hec:hec-db-jdbc:10.0.2' // CWMS 3.3.1 -> 9.4.17
}

jar {
  manifest {
    attributes(
      "Class-Path": configurations.runtimeClasspath.files.collect { "lib/" + it.getName() }.join(' '))
  }
}

distributions {
	main {
		contents {
			from jar // copies your jar
			into('lib') {
				from(project.configurations.runtimeClasspath) // copies dependency jars
			}
		}
	}
}
